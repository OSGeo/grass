find_package(FLEX REQUIRED)

find_package(BISON REQUIRED)

find_package(PROJ REQUIRED)
add_library(PROJ INTERFACE IMPORTED GLOBAL)
set_property(TARGET PROJ PROPERTY INTERFACE_LINK_LIBRARIES ${PROJ_LIBRARY${find_library_suffix}} )
set_property(TARGET PROJ PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${PROJ_INCLUDE_DIR} )

find_package(GDAL REQUIRED)
add_library(GDAL INTERFACE IMPORTED GLOBAL)
set_property(TARGET GDAL PROPERTY INTERFACE_LINK_LIBRARIES ${GDAL_LIBRARY} )
set_property(TARGET GDAL PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${GDAL_INCLUDE_DIR} )

find_package(PNG REQUIRED)
add_library(LIBPNG INTERFACE IMPORTED GLOBAL)
set_property(TARGET LIBPNG PROPERTY INTERFACE_LINK_LIBRARIES ${PNG_LIBRARY${find_library_suffix}} )
set_property(TARGET LIBPNG PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${PNG_INCLUDE_DIR} )

find_package(JPEG)
if(JPEG_FOUND)
  add_library(LIBJPEG INTERFACE IMPORTED GLOBAL)
  set_property(TARGET LIBJPEG PROPERTY INTERFACE_LINK_LIBRARIES ${JPEG_LIBRARY${find_library_suffix}} )
  set_property(TARGET LIBJPEG PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${JPEG_INCLUDE_DIR} )
endif()
find_package(ZLIB REQUIRED)
add_library(ZLIB INTERFACE IMPORTED GLOBAL)
set_property(TARGET ZLIB PROPERTY INTERFACE_LINK_LIBRARIES ${ZLIB_LIBRARY${find_library_suffix}} )
set_property(TARGET ZLIB PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${ZLIB_INCLUDE_DIR} )
if(UNIX)
find_library(M_LIBRARY m)
add_library(LIBM INTERFACE IMPORTED GLOBAL)
set_property(TARGET LIBM PROPERTY INTERFACE_LINK_LIBRARIES ${M_LIBRARY} )
mark_as_advanced(M_LIBRARY)
endif()

find_package(Freetype REQUIRED)
add_library(FREETYPE INTERFACE IMPORTED GLOBAL)
set_property(TARGET FREETYPE PROPERTY INTERFACE_LINK_LIBRARIES ${FREETYPE_LIBRARY${find_library_suffix}} )
set_property(TARGET FREETYPE PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${FREETYPE_INCLUDE_DIRS} )

find_package(FFTW REQUIRED)
if(FFTW_FOUND)
  add_library(FFTW INTERFACE IMPORTED GLOBAL)
  set_property(TARGET FFTW PROPERTY INTERFACE_LINK_LIBRARIES ${FFTW_LIBRARIES} )
  set_property(TARGET FFTW PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${FFTW_INCLUDE_DIR} )
endif()

if(WITH_CAIRO)
  find_package(Cairo REQUIRED)
  add_library(CAIRO INTERFACE IMPORTED GLOBAL)
  set_property(TARGET CAIRO PROPERTY INTERFACE_LINK_LIBRARIES ${CAIRO_LIBRARIES} )
  set_property(TARGET CAIRO PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${CAIRO_INCLUDE_DIRS} )
endif()

if(WITH_X11)
  find_package(X11 REQUIRED)
  add_library(X11 INTERFACE IMPORTED GLOBAL)
  set_property(TARGET X11 PROPERTY INTERFACE_LINK_LIBRARIES ${X11_LIBRARIES} )
  set_property(TARGET X11 PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${X11_INCLUDE_DIR})
endif()

if(WIN32)
  find_package(ODBC QUIET)
  if(ODBC_FOUND)
    add_library(ODBC INTERFACE IMPORTED GLOBAL)
    set_property(TARGET ODBC PROPERTY INTERFACE_LINK_LIBRARIES ${ODBC_LIBRARIES} )
    set_property(TARGET  PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${ODBC_INCLUDE_DIRS})
  endif()
endif()

find_package(TIFF REQUIRED)
add_library(TIFF INTERFACE IMPORTED GLOBAL)
set_property(TARGET TIFF PROPERTY INTERFACE_LINK_LIBRARIES ${TIFF_LIBRARY${find_library_suffix}} )
set_property(TARGET TIFF PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${TIFF_INCLUDE_DIR})

find_package(Iconv QUIET)
if(ICONV_FOUND)
add_library(ICONV INTERFACE IMPORTED GLOBAL)
set_property(TARGET ICONV PROPERTY INTERFACE_LINK_LIBRARIES ${ICONV_LIBRARIES} )
set_property(TARGET ICONV PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${ICONV_INCLUDE_DIR})
#if(ICONV_SECOND_ARGUMENT_IS_CONST)
#set() update this value in include/config.cmake.in
endif()

if(WITH_BZLIB)
  find_package(BZip2)
  if(BZIP2_FOUND)
    add_library(BZIP2 INTERFACE IMPORTED GLOBAL)
    set_property(TARGET BZIP2 PROPERTY INTERFACE_LINK_LIBRARIES ${BZIP2_LIBRARY${find_library_suffix}} )
    set_property(TARGET BZIP2 PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${BZIP2_INCLUDE_DIR})
  endif()
endif()

if(WITH_BLAS)
  find_package(BLAS)
  if(BLAS_FOUND)
    add_library(BLAS INTERFACE IMPORTED GLOBAL)
    set_property(TARGET BLAS PROPERTY INTERFACE_LINK_LIBRARIES ${BLAS_LIBRARIES} )
  endif()
endif()

if(WITH_LAPACK)
  find_package(LAPACK)
  if(LAPACK_FOUND)
    add_library(LAPACK INTERFACE IMPORTED GLOBAL)
    set_property(TARGET LAPACK PROPERTY INTERFACE_LINK_LIBRARIES ${LAPACK_LIBRARIES} )
  endif()
endif()

if(WITH_OPENGL)
  find_package(OpenGL REQUIRED)
  add_library(OPENGL INTERFACE IMPORTED GLOBAL)
  set_property(TARGET OPENGL PROPERTY INTERFACE_LINK_LIBRARIES ${OPENGL_LIBRARIES} )
  set_property(TARGET OPENGL PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${OPENGL_INCLUDE_DIR} )
endif()

if(WITH_POSTGRES)
  find_package(PostgreSQL REQUIRED)
  add_library(POSTGRES INTERFACE IMPORTED GLOBAL)
  set_property(TARGET POSTGRES PROPERTY INTERFACE_LINK_LIBRARIES ${PostgreSQL_LIBRARY} )
  set_property(TARGET POSTGRES PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${PostgreSQL_INCLUDE_DIR} )
endif()

if(WITH_SQLITE)
  find_package(SQLite REQUIRED)
  add_library(SQLITE INTERFACE IMPORTED GLOBAL)
  set_property(TARGET SQLITE PROPERTY INTERFACE_LINK_LIBRARIES ${SQLITE_LIBRARY} )
  set_property(TARGET SQLITE PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${SQLITE_INCLUDE_DIRS} )
endif()

find_package(PDAL QUIET)
if(PDAL_FOUND)
add_library(PDAL INTERFACE IMPORTED GLOBAL)
set_property(TARGET PDAL PROPERTY INTERFACE_LINK_LIBRARIES ${PDAL_LIBRARIES} )
set_property(TARGET PDAL PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${PDAL_INCLUDE_DIRS} )
endif()

find_package(LibLAS QUIET)
if(LIBLAS_FOUND)
  add_library(LIBLAS INTERFACE IMPORTED GLOBAL)
  set_property(TARGET LIBLAS PROPERTY INTERFACE_LINK_LIBRARIES ${LibLAS_C_LIBRARY} )
  set_property(TARGET LIBLAS PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${LibLAS_INCLUDE_DIR} )
endif()

find_package(NetCDF QUIET)
if(NETCDF_FOUND)
	add_library(NETCDF INTERFACE IMPORTED GLOBAL)
	set_property(TARGET NETCDF PROPERTY INTERFACE_LINK_LIBRARIES ${NetCDF_LIBRARY} )
    set_property(TARGET NETCDF PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${NetCDF_INCLUDE_DIR} )
endif()

find_package(GEOS REQUIRED)
add_library(GEOS INTERFACE IMPORTED GLOBAL)
set_property(TARGET GEOS PROPERTY INTERFACE_LINK_LIBRARIES ${GEOS_C_LIBRARY${find_library_suffix}} )
set_property(TARGET GEOS PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${GEOS_INCLUDE_DIR} )

set(THREADS_PREFER_PTHREAD_FLAG ON)
find_package(Threads)
if(Threads_FOUND)
  add_library(PTHREAD INTERFACE IMPORTED GLOBAL)
  if(THREADS_HAVE_PTHREAD_ARG)
    set_property(TARGET PTHREAD PROPERTY INTERFACE_COMPILE_OPTIONS "-pthread")
  endif()
  if(CMAKE_THREAD_LIBS_INIT)
    set_property(TARGET PTHREAD PROPERTY INTERFACE_LINK_LIBRARIES "${CMAKE_THREAD_LIBS_INIT}")
  endif()
endif()

if(MSVC)
  find_package(PCRE REQUIRED)
  add_library(PCRE INTERFACE IMPORTED GLOBAL)
  set_property(TARGET PCRE PROPERTY INTERFACE_LINK_LIBRARIES ${PCRE_LIBRARY${find_library_suffix}} )
  set_property(TARGET PCRE PROPERTY INTERFACE_INCLUDE_DIRECTORIES ${PCRE_INCLUDE_DIR} )
endif()

# find_package (PythonLibs REQUIRED )
set(Python_ADDITIONAL_VERSIONS 3.5 3.6)
find_package (PythonInterp REQUIRED )
# find_package ( Numpy )
